<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>WebAM Test</title>
    <script src="WAAClock-latest.js"></script>
    <script src="webam.js"></script>
  </head>
  <body>
    <script>
      let wam = new WebAudioMidi(callback, 'sf/Chaos_V20.sf2', {software: true, conlog: true});
      function callback() {
        wam.runTests();
        console.log(wam.listMIDIAccessProperties('function'));
        console.log(wam.listOutPorts('function'));
        console.log(wam.listInPorts('function'));

        alert('Will play soundTestPercussion()...');
        wam.soundTestPercussion(500);

        /*
        wam.noteOn (0, 60);
        wam.noteOff(0, 60, 1000);
        wam.programChange(3, 53);
        wam.chordOn (3, [55, 60, 64], 80, 2000);
        wam.chordOff(3, [55, 60, 64], 3000);

        // Using WAAClock
        let clock = new WAAClock(new AudioContext);
        clock.start();
        clock.setTimeout(function() {wam.noteOn (0, 60);}, 4);
        clock.setTimeout(function() {wam.noteOff(0, 60);}, 5);

        alert('Will play soundTestPercussion()...');
        wam.soundTestPercussion(500);
        alert('Will play soundTestPrograms()...');
        wam.soundTestPrograms();
        alert('Will play soundTestNotes()...');
        wam.soundTestNotes(500);
        alert('Will play soundTestVelocities()...');
        wam.soundTestVelocities(500);
        */
      }
    </script>
  </body>
</html>
