<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>WebAM Test</title>
    <script src="WAAClock-latest.js"></script>
    <script src="webam.js"></script>
  </head>
  <body>
    <script>
      let wam = new WebAudioMidi(callback, {software: true, conlog: true});
      function callback() {
        wam.runTests();
        console.log(wam.listMIDIAccessProperties('function'));
        console.log(wam.listOutPorts('function'));
        console.log(wam.listInPorts('function'));
        wam.noteOn(0, 60);
        wam.noteOff(0, 60, 1000);
        wam.programChange(3, 52);
        wam.chordOn(3, [55, 60, 64], 80, 2000);
        wam.chordOff(3, [55, 60, 64], 3000);

        // Using WAAClock
        let clock = new WAAClock(new AudioContext);
        clock.start();
        clock.setTimeout(function() {wam.noteOn (0, 60);}, 4);
        clock.setTimeout(function() {wam.noteOff(0, 60);}, 5);
      }
    </script>
  </body>
</html>
